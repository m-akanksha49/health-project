<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Care Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-green: #239f85;
            --light-green: #DFE4E0;
            --accent-orange: #ff5d22;
            --white: #ffffff;
            --text-dark: #333;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            background-color: var(--light-green);
            color: var(--text-dark);
            min-height: 100vh;
        }
        
        /* Header Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--white);
            box-shadow: var(--shadow);
        }
        
        .header h1 {
            font-size: 1.5rem;
            color: var(--primary-green);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .today-date {
            font-weight: bold;
            color: var(--primary-green);
        }
        
        /* Main Layout */
        .main-container {
            display: flex;
            flex: 1;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 80px;
            background-color: var(--primary-green);
            color: var(--white);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            transition: width 0.3s ease;
        }
        
        .sidebar.expanded {
            width: 200px;
        }
        
        .menu-toggle {
            font-size: 24px;
            margin-bottom: 30px;
            cursor: pointer;
        }
        
        .menu-items {
            display: flex;
            flex-direction: column;
            width: 100%;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .menu-item.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 4px solid var(--accent-orange);
        }
        
        .menu-item i {
            font-size: 20px;
            margin-right: 15px;
            width: 24px;
            text-align: center;
        }
        
        .menu-item span {
            display: none;
        }
        
        .sidebar.expanded .menu-item span {
            display: inline;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            background-color: var(--light-green);
            overflow-y: auto;
        }
        
        .greeting-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        @media (min-width: 768px) {
            .greeting-container {
                flex-direction: row;
            }
        }
        
        .greeting-text {
            flex: 1;
            text-align: center;
            margin-bottom: 15px;
        }
        
        @media (min-width: 768px) {
            .greeting-text {
                text-align: left;
                margin-bottom: 0;
            }
        }
        
        .greeting-text h2 {
            margin-bottom: 10px;
            color: var(--primary-green);
        }
        
        .greeting-text .highlight {
            color: var(--accent-orange);
        }
        
        .greeting-image {
            width: 100%;
            max-width: 300px;
            height: auto;
        }
        
        .history-button {
            background-color: var(--accent-orange);
            color: var(--white);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }
        
        /* Data Cards */
        .data-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .card {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
        }
        
        .card i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .card h3 {
            margin-bottom: 10px;
            color: var(--primary-green);
        }
        
        .card p {
            margin-bottom: 10px;
        }
        
        .card input[type="number"] {
            width: 80%;
            padding: 8px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .card button {
            background-color: var(--primary-green);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .card button:hover {
            background-color: #1d8b72;
        }
        
        /* Color accents for each card */
        .card.heart-rate i,
        .card.blood-pressure i {
            color: var(--accent-orange);
        }
        
        .card.steps,
        .card.sleep-condition {
            background-color: var(--primary-green);
            color: var(--white);
        }
        
        .card.steps i,
        .card.sleep-condition i {
            color: var(--white);
        }
        
        .card.steps button,
        .card.sleep-condition button {
            background-color: var(--accent-orange);
        }
        
        .card.steps button:hover,
        .card.sleep-condition button:hover {
            background-color: #e04d1a;
        }
        
        /* Circular Progress for Overall Condition */
        .circular-progress {
            position: relative;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary-green) 0% 65%,
                var(--light-green) 65% 100%
            );
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
        }
        
        .progress-value {
            position: absolute;
            font-size: 18px;
            font-weight: bold;
            color: var(--text-dark);
        }
        
        /* Chart Section */
        .chart-container {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        /* Calendar Styling */
        .calendar-container {
            background-color: var(--white);
            color: var(--text-dark);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: none;
        }
        
        .calendar-container.active {
            display: block;
        }
        
        .calendar-container h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-nav {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--primary-green);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            text-align: center;
            font-weight: bold;
            padding: 10px 0;
            color: var(--primary-green);
        }
        
        .calendar-date {
            text-align: center;
            padding: 10px 0;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .calendar-date:hover {
            background-color: var(--light-green);
        }
        
        .calendar-date.today {
            background-color: var(--accent-orange);
            color: var(--white);
        }
        
        .calendar-date.selected {
            background-color: var(--primary-green);
            color: var(--white);
        }
        
        /* Schedule Styling */
        .schedule {
            margin-top: 20px;
        }
        
        .schedule h4 {
            color: var(--primary-green);
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .schedule-box {
            display: grid;
            gap: 10px;
            grid-template-columns: repeat(2, 1fr);
            background-color: var(--light-green);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .time-slot {
            background-color: var(--white);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            box-shadow: var(--shadow);
            font-size: 14px;
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .time-slot:hover {
            transform: translateY(-3px);
        }
        
        .time {
            font-size: 16px;
            font-weight: bold;
            color: var(--accent-orange);
            margin-bottom: 5px;
        }
        
        .edit-schedule-button {
            margin-top: 10px;
            padding: 10px;
            background-color: var(--accent-orange);
            color: var(--white);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-green);
        }
        
        .modal-header h3 {
            color: var(--primary-green);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .btn-primary {
            background-color: var(--primary-green);
            color: var(--white);
        }
        
        .btn-secondary {
            background-color: var(--light-green);
            color: var(--text-dark);
        }
        
        /* History Modal */
        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .history-content {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-green);
        }
        
        .history-header h3 {
            color: var(--primary-green);
        }
        
        .history-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .history-tab {
            padding: 8px 15px;
            background-color: var(--light-green);
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .history-tab.active {
            background-color: var(--primary-green);
            color: var(--white);
        }
        
        .history-data {
            display: none;
        }
        
        .history-data.active {
            display: block;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .history-table th, .history-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--light-green);
        }
        
        .history-table th {
            background-color: var(--light-green);
            color: var(--primary-green);
        }
        
        /* Mobile Navigation */
        .mobile-nav {
            display: flex;
            justify-content: space-around;
            background-color: var(--primary-green);
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 100;
        }
        
        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--white);
            font-size: 0.8rem;
        }
        
        .mobile-nav-item i {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .mobile-nav-item.active {
            color: var(--accent-orange);
        }
        
        @media (min-width: 768px) {
            .mobile-nav {
                display: none;
            }
        }
        
        /* Settings Panel */
        .settings-panel {
            display: none;
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .settings-panel.active {
            display: block;
        }
        
        .settings-panel h3 {
            color: var(--primary-green);
            margin-bottom: 15px;
        }
        
        .settings-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: var(--light-green);
            border-radius: 5px;
        }
        
        .settings-option label {
            font-weight: bold;
        }
        
        .settings-option input {
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Health Care Dashboard</h1>
        <div class="header-right">
            <div class="today-date" id="todayDate"></div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <div class="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
            <div class="menu-items">
                <div class="menu-item active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="menu-item" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Calendar</span>
                </div>
                <div class="menu-item" data-page="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </div>
                <div class="menu-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Dashboard Content -->
            <div class="dashboard-content active">
                <section class="greeting-container">
                    <div class="greeting-text">
                        <h2>Hello, <span class="highlight">Guy Hawkins</span></h2>
                        <p>It looks like you have not completed today's exercises</p>
                        <button class="history-button" id="historyButton">History ➔</button>
                    </div>
                    <img src="https://tse3.mm.bing.net/th?id=OIP.fNSWOzNOcC7h2_0SPu7svwHaDL&pid=Api&P=0&h=220" alt="Doctor Illustration" class="greeting-image">
                </section>

                <section class="data-cards">
                    <div class="card heart-rate">
                        <i class="fa-solid fa-heart-pulse"></i>
                        <h3>Heart Rate</h3>
                        <p><span class="value" id="heartRateDisplay">102</span> bpm</p>
                        <p>Your heart rate is <strong id="heartRateStatus">normal</strong></p>
                        <input type="number" id="heartRateInput" placeholder="Enter heart rate" />
                        <button onclick="updateHeartRate()">Update</button>
                    </div>
                    <div class="card steps">
                        <i class="fa-solid fa-shoe-prints"></i>
                        <h3>Steps</h3>
                        <p><span class="value" id="stepsDisplay">1500</span> Steps</p>
                        <p>Need <span id="stepsNeeded">3500</span> steps to complete 5000</p>
                        <input type="number" id="stepsInput" placeholder="Enter steps" />
                        <button onclick="updateSteps()">Update</button>
                    </div>
                    <div class="card blood-pressure">
                        <i class="fa-solid fa-droplet"></i>
                        <h3>Blood Pressure</h3>
                        <p><span class="value" id="bloodPressureDisplay">98</span> mmHg</p>
                        <p>Your BP is <strong id="bloodPressureStatus">normal</strong></p>
                        <input type="number" id="bloodPressureInput" placeholder="Enter BP" />
                        <button onclick="updateBloodPressure()">Update</button>
                    </div>
                    <div class="card sleep-condition">
                        <i class="fa-solid fa-bed"></i>
                        <h3>Sleep Condition</h3>
                        <p><span class="value" id="sleepDisplay">6</span> Hours</p>
                        <p>You have <strong id="sleepStatus">less</strong> sleep time</p>
                        <input type="number" id="sleepInput" placeholder="Enter hours slept" />
                        <button onclick="updateSleep()">Update</button>
                    </div>
                    <div class="card overall-condition">
                        <div class="circular-progress">
                            <span class="progress-value">65%</span>
                        </div>
                        <h3>Overall Condition</h3>
                        <p>2% greater than previous week</p>
                    </div>
                </section>

                <section class="chart-container">
                    <canvas id="healthChart" width="400" height="200"></canvas>
                </section>
            </div>

            <!-- Calendar Content -->
            <div class="calendar-container">
                <h3>Health Calendar</h3>
                <div class="calendar-header">
                    <button class="calendar-nav" id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                    <h4 id="calendarMonth"></h4>
                    <button class="calendar-nav" id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="calendar-grid" id="calendarDays">
                    <!-- Calendar days will be populated by JavaScript -->
                </div>
            </div>

            <!-- Analytics Content -->
            <div class="chart-container analytics-content" style="display: none;">
                <h3>Health Analytics</h3>
                <canvas id="analyticsChart" width="400" height="200"></canvas>
            </div>

            <!-- Settings Content -->
            <div class="settings-panel">
                <h3>Settings</h3>
                <div class="settings-options">
                    <div class="settings-option">
                        <label for="notificationToggle">Enable Notifications</label>
                        <input type="checkbox" id="notificationToggle" checked>
                    </div>
                    <div class="settings-option">
                        <label for="dailyGoal">Daily Step Goal</label>
                        <input type="number" id="dailyGoal" value="5000">
                    </div>
                    <div class="settings-option">
                        <label for="sleepGoal">Sleep Goal (hours)</label>
                        <input type="number" id="sleepGoal" value="7">
                    </div>
                    <div class="settings-option">
                        <label for="heartRateAlert">Heart Rate Alert Threshold</label>
                        <input type="number" id="heartRateAlert" value="100">
                    </div>
                    <button class="edit-schedule-button" id="editScheduleBtn">+ Add/Edit Event</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Event</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <form id="eventForm">
                <input type="hidden" id="eventId">
                <div class="form-group">
                    <label for="eventTime">Time</label>
                    <select id="eventTime" required>
                        <option value="">Select Time</option>
                        <option value="8AM">8:00 AM</option>
                        <option value="10AM">10:00 AM</option>
                        <option value="12PM">12:00 PM</option>
                        <option value="1PM">1:00 PM</option>
                        <option value="3PM">3:00 PM</option>
                        <option value="6PM">6:00 PM</option>
                        <option value="8PM">8:00 PM</option>
                        <option value="10PM">10:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventName">Event Name</label>
                    <input type="text" id="eventName" placeholder="Enter event name" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEvent">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- History Modal -->
    <div class="history-modal" id="historyModal">
        <div class="history-content">
            <div class="history-header">
                <h3>Health History</h3>
                <button class="close-modal" id="closeHistoryModal">&times;</button>
            </div>
            <div class="history-tabs">
                <button class="history-tab active" data-tab="heartRate">Heart Rate</button>
                <button class="history-tab" data-tab="steps">Steps</button>
                <button class="history-tab" data-tab="bloodPressure">Blood Pressure</button>
                <button class="history-tab" data-tab="sleep">Sleep</button>
            </div>
            <div class="history-data active" id="heartRateHistory">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Heart Rate (bpm)</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="heartRateHistoryBody">
                        <!-- Heart rate history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="history-data" id="stepsHistory">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Steps</th>
                            <th>Goal Achievement</th>
                        </tr>
                    </thead>
                    <tbody id="stepsHistoryBody">
                        <!-- Steps history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="history-data" id="bloodPressureHistory">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Blood Pressure (mmHg)</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="bloodPressureHistoryBody">
                        <!-- Blood pressure history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="history-data" id="sleepHistory">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Sleep (hours)</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="sleepHistoryBody">
                        <!-- Sleep history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav">
        <div class="mobile-nav-item active" data-page="dashboard">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="mobile-nav-item" data-page="calendar">
            <i class="fas fa-calendar-alt"></i>
            <span>Calendar</span>
        </div>
        <div class="mobile-nav-item" data-page="analytics">
            <i class="fas fa-chart-bar"></i>
            <span>Stats</span>
        </div>
        <div class="mobile-nav-item" data-page="settings">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </div>
    </div>

    <script>
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateTodayDate();
            updateCalendar();
            initializeChart();
            initializeAnalyticsChart();
            loadHistoryData();
            setupEventListeners();
        });

        // Update today's date in header
        function updateTodayDate() {
            const today = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('todayDate').textContent = today.toLocaleDateString('en-US', options);
        }

        // Calendar functionality
        let currentDate = new Date();

        function updateCalendar() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay();
            
            const calendarGrid = document.getElementById('calendarDays');
            calendarGrid.innerHTML = '';
            
            // Add day headers
            for (let i = 0; i < 7; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = dayNames[i];
                calendarGrid.appendChild(dayElement);
            }
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < startingDay; i++) {
                const emptyElement = document.createElement('div');
                emptyElement.className = 'calendar-date';
                calendarGrid.appendChild(emptyElement);
            }
            
            // Add days of the month
            const today = new Date();
            for (let i = 1; i <= daysInMonth; i++) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date';
                dateElement.textContent = i;
                
                // Check if this date is today
                if (today.getDate() === i && today.getMonth() === month && today.getFullYear() === year) {
                    dateElement.classList.add('today');
                }
                
                calendarGrid.appendChild(dateElement);
            }
        }

        // Initialize the health chart
        function initializeChart() {
            const ctx = document.getElementById('healthChart').getContext('2d');
            const healthChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                    datasets: [{
                        label: 'Calories Burned',
                        data: [10, 6, 7, 5, 6, 10, 8],
                        backgroundColor: '#ff5d22',
                        borderRadius: 5,
                        barThickness: 20,
                    }, {
                        label: 'Steps Taken',
                        data: [8, 5, 9, 6, 7, 9, 5],
                        backgroundColor: '#239f85',
                        borderRadius: 5,
                        barThickness: 20,
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#333',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: '#DFE4E0',
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                color: '#333',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#333',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize analytics chart
        function initializeAnalyticsChart() {
            const ctx = document.getElementById('analyticsChart').getContext('2d');
            const analyticsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Average Heart Rate',
                        data: [72, 75, 78, 76, 74, 73, 75, 77, 76, 74, 73, 72],
                        borderColor: '#ff5d22',
                        backgroundColor: 'rgba(255, 93, 34, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Average Steps',
                        data: [4500, 4800, 5200, 5100, 5300, 5500, 5400, 5600, 5800, 5700, 5900, 6000],
                        borderColor: '#239f85',
                        backgroundColor: 'rgba(35, 159, 133, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#333',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: '#DFE4E0',
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                color: '#333',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#333',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
        }

        // History data
        let historyData = {
            heartRate: [
                { date: '2023-10-01', value: 98, status: 'Normal' },
                { date: '2023-10-02', value: 102, status: 'Normal' },
                { date: '2023-10-03', value: 105, status: 'Elevated' },
                { date: '2023-10-04', value: 95, status: 'Normal' },
                { date: '2023-10-05', value: 110, status: 'Elevated' }
            ],
            steps: [
                { date: '2023-10-01', value: 4500, goal: 5000 },
                { date: '2023-10-02', value: 5200, goal: 5000 },
                { date: '2023-10-03', value: 3800, goal: 5000 },
                { date: '2023-10-04', value: 6100, goal: 5000 },
                { date: '2023-10-05', value: 4900, goal: 5000 }
            ],
            bloodPressure: [
                { date: '2023-10-01', value: 98, status: 'Normal' },
                { date: '2023-10-02', value: 102, status: 'Normal' },
                { date: '2023-10-03', value: 115, status: 'Elevated' },
                { date: '2023-10-04', value: 95, status: 'Normal' },
                { date: '2023-10-05', value: 108, status: 'Normal' }
            ],
            sleep: [
                { date: '2023-10-01', value: 7.5, status: 'Good' },
                { date: '2023-10-02', value: 6.2, status: 'Fair' },
                { date: '2023-10-03', value: 8.1, status: 'Excellent' },
                { date: '2023-10-04', value: 5.8, status: 'Poor' },
                { date: '2023-10-05', value: 7.0, status: 'Good' }
            ]
        };

        function loadHistoryData() {
            // Load heart rate history
            const heartRateBody = document.getElementById('heartRateHistoryBody');
            heartRateBody.innerHTML = '';
            historyData.heartRate.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.value}</td>
                    <td>${entry.status}</td>
                `;
                heartRateBody.appendChild(row);
            });

            // Load steps history
            const stepsBody = document.getElementById('stepsHistoryBody');
            stepsBody.innerHTML = '';
            historyData.steps.forEach(entry => {
                const achievement = entry.value >= entry.goal ? 'Achieved' : 'Not Achieved';
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.value}</td>
                    <td>${achievement}</td>
                `;
                stepsBody.appendChild(row);
            });

            // Load blood pressure history
            const bloodPressureBody = document.getElementById('bloodPressureHistoryBody');
            bloodPressureBody.innerHTML = '';
            historyData.bloodPressure.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.value}</td>
                    <td>${entry.status}</td>
                `;
                bloodPressureBody.appendChild(row);
            });

            // Load sleep history
            const sleepBody = document.getElementById('sleepHistoryBody');
            sleepBody.innerHTML = '';
            historyData.sleep.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.date}</td>
                    <td>${entry.value}</td>
                    <td>${entry.status}</td>
                `;
                sleepBody.appendChild(row);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Toggle sidebar
            document.querySelector('.menu-toggle').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('expanded');
            });
            
            // Navigation items
            document.querySelectorAll('.menu-item, .mobile-nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    navigateToPage(page);
                    
                    // Update active states
                    document.querySelectorAll('.menu-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    document.querySelectorAll('.mobile-nav-item').forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // Calendar navigation
            document.getElementById('prevMonth').addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() - 1);
                updateCalendar();
            });
            
            document.getElementById('nextMonth').addEventListener('click', function() {
                currentDate.setMonth(currentDate.getMonth() + 1);
                updateCalendar();
            });
            
            // History button
            document.getElementById('historyButton').addEventListener('click', function() {
                document.getElementById('historyModal').style.display = 'flex';
            });
            
            // History tabs
            document.querySelectorAll('.history-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.history-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    document.querySelectorAll('.history-data').forEach(d => {
                        d.classList.remove('active');
                    });
                    
                    this.classList.add('active');
                    document.getElementById(tabName + 'History').classList.add('active');
                });
            });
            
            // Modal events
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('cancelEvent').addEventListener('click', closeModal);
            document.getElementById('closeHistoryModal').addEventListener('click', closeHistoryModal);
            
            // Close modals when clicking outside
            document.getElementById('eventModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            document.getElementById('historyModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeHistoryModal();
                }
            });
        }

        // Navigation function
        function navigateToPage(page) {
            // Hide all content sections
            document.querySelectorAll('.dashboard-content, .calendar-container, .analytics-content, .settings-panel').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show the selected page
            if (page === 'dashboard') {
                document.querySelector('.dashboard-content').style.display = 'block';
            } else if (page === 'calendar') {
                document.querySelector('.calendar-container').style.display = 'block';
            } else if (page === 'analytics') {
                document.querySelector('.analytics-content').style.display = 'block';
            } else if (page === 'settings') {
                document.querySelector('.settings-panel').style.display = 'block';
            }
        }

        // Modal functions
        function openModal() {
            document.getElementById('eventModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('eventModal').style.display = 'none';
        }

        function closeHistoryModal() {
            document.getElementById('historyModal').style.display = 'none';
        }

        // Health metrics update functions
        function updateHeartRate() {
            const heartRateInput = document.getElementById("heartRateInput").value;
            const heartRateDisplay = document.getElementById("heartRateDisplay");
            const heartRateStatus = document.getElementById("heartRateStatus");

            if (heartRateInput) {
                heartRateDisplay.textContent = heartRateInput;

                if (heartRateInput >= 60 && heartRateInput <= 100) {
                    heartRateStatus.textContent = "normal";
                    heartRateStatus.style.color = "#239f85";
                } else {
                    heartRateStatus.textContent = "abnormal";
                    heartRateStatus.style.color = "#ff5d22";
                }
                
                // Add to history
                const today = new Date().toISOString().split('T')[0];
                historyData.heartRate.unshift({
                    date: today,
                    value: parseInt(heartRateInput),
                    status: (heartRateInput >= 60 && heartRateInput <= 100) ? 'Normal' : 'Elevated'
                });
                
                // Keep only last 10 entries
                if (historyData.heartRate.length > 10) {
                    historyData.heartRate.pop();
                }
                
                loadHistoryData();
            } else {
                alert("Please enter a valid heart rate");
            }
        }

        function updateBloodPressure() {
            const bloodPressureInput = document.getElementById("bloodPressureInput").value;
            const bloodPressureDisplay = document.getElementById("bloodPressureDisplay");
            const bloodPressureStatus = document.getElementById("bloodPressureStatus");

            if (bloodPressureInput) {
                bloodPressureDisplay.textContent = bloodPressureInput;

                if (bloodPressureInput >= 90 && bloodPressureInput <= 120) {
                    bloodPressureStatus.textContent = "normal";
                    bloodPressureStatus.style.color = "#239f85";
                } else {
                    bloodPressureStatus.textContent = "abnormal";
                    bloodPressureStatus.style.color = "#ff5d22";
                }
                
                // Add to history
                const today = new Date().toISOString().split('T')[0];
                historyData.bloodPressure.unshift({
                    date: today,
                    value: parseInt(bloodPressureInput),
                    status: (bloodPressureInput >= 90 && bloodPressureInput <= 120) ? 'Normal' : 'Elevated'
                });
                
                // Keep only last 10 entries
                if (historyData.bloodPressure.length > 10) {
                    historyData.bloodPressure.pop();
                }
                
                loadHistoryData();
            } else {
                alert("Please enter a valid blood pressure");
            }
        }

        function updateSteps() {
            const stepsInput = document.getElementById("stepsInput").value;
            const stepsDisplay = document.getElementById("stepsDisplay");
            const stepsNeeded = document.getElementById("stepsNeeded");
            const totalStepsGoal = 5000;

            if (stepsInput) {
                stepsDisplay.textContent = stepsInput;
                const stepsRemaining = totalStepsGoal - stepsInput;
                stepsNeeded.textContent = stepsRemaining > 0 ? stepsRemaining : 0;

                if (stepsInput >= totalStepsGoal) {
                    stepsNeeded.textContent = "Goal achieved!";
                    stepsNeeded.style.color = "green";
                } else {
                    stepsNeeded.style.color = "#333";
                }
                
                // Add to history
                const today = new Date().toISOString().split('T')[0];
                historyData.steps.unshift({
                    date: today,
                    value: parseInt(stepsInput),
                    goal: totalStepsGoal
                });
                
                // Keep only last 10 entries
                if (historyData.steps.length > 10) {
                    historyData.steps.pop();
                }
                
                loadHistoryData();
            } else {
                alert("Please enter a valid step count");
            }
        }

        function updateSleep() {
            const sleepInput = document.getElementById("sleepInput").value;
            const sleepDisplay = document.getElementById("sleepDisplay");
            const sleepStatus = document.getElementById("sleepStatus");

            if (sleepInput) {
                sleepDisplay.textContent = sleepInput;

                if (sleepInput >= 7) {
                    sleepStatus.textContent = "sufficient";
                    sleepStatus.style.color = "green";
                } else {
                    sleepStatus.textContent = "less";
                    sleepStatus.style.color = "red";
                }
                
                // Add to history
                const today = new Date().toISOString().split('T')[0];
                let status = 'Poor';
                if (sleepInput >= 7) status = 'Good';
                if (sleepInput >= 8) status = 'Excellent';
                
                historyData.sleep.unshift({
                    date: today,
                    value: parseFloat(sleepInput),
                    status: status
                });
                
                // Keep only last 10 entries
                if (historyData.sleep.length > 10) {
                    historyData.sleep.pop();
                }
                
                loadHistoryData();
            } else {
                alert("Please enter a valid sleep duration");
            }
        }
    </script>
</body>
</html>